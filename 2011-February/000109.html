<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pgocaml-dev] Patch to make PGOCaml work with Batteries
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pgocaml-dev/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:pgocaml-dev%40lists.berlios.de?Subject=Re%3A%20%5BPgocaml-dev%5D%20Patch%20to%20make%20PGOCaml%20work%20with%20Batteries&In-Reply-To=%3C4D4AF9B5.2060301%40elehack.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000108.html">
   <LINK REL="Next"  HREF="000110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pgocaml-dev] Patch to make PGOCaml work with Batteries</H1>
    <B>Michael Ekstrand</B> 
    <A HREF="mailto:pgocaml-dev%40lists.berlios.de?Subject=Re%3A%20%5BPgocaml-dev%5D%20Patch%20to%20make%20PGOCaml%20work%20with%20Batteries&In-Reply-To=%3C4D4AF9B5.2060301%40elehack.net%3E"
       TITLE="[Pgocaml-dev] Patch to make PGOCaml work with Batteries">michael at elehack.net
       </A><BR>
    <I>Thu Feb  3 19:53:41 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000108.html">[Pgocaml-dev] Patch to make PGOCaml work with Batteries
</A></li>
        <LI>Next message: <A HREF="000110.html">[Pgocaml-dev] Specifying additional parameters (such as search_path) at connection time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109">[ date ]</a>
              <a href="thread.html#109">[ thread ]</a>
              <a href="subject.html#109">[ subject ]</a>
              <a href="author.html#109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/03/2011 12:32 PM, Dario Teixeira wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;&gt;<i>  In more testing and usage, I've found a bug and some suboptimality
</I>&gt;&gt;<i>  in the original patch.  Attached is an updated version which fixes a
</I>&gt;&gt;<i>  bug in the syntax extension and makes the USE_BATTERIES variable an
</I>&gt;&gt;<i>  unconditional set so that the config file must be modified to turn
</I>&gt;&gt;<i>  on Batteries.  It also substitutes the PACKAGE variable in as a
</I>&gt;&gt;<i>  dependency for pgocaml.syntax, rather than hard-coding pgocaml, so
</I>&gt;&gt;<i>  that it can work correctly in Batteries mode with a different
</I>&gt;&gt;<i>  package name.
</I>&gt;<i> I'll take a look at the patch and apply it in trunk.  Eventually it will
</I>&gt;<i> make sense to depend on Batteries only, but for now let's keep the choice
</I>&gt;<i> between ExtLib and Batteries.
</I>&gt;<i>
</I>&gt;<i> As for the GODI package, perhaps you could have a single pgocaml package
</I>&gt;<i> by relying on a configuration variable to switch between ExtLib/Batteries?
</I>&gt;<i> Also, there is a configuration option in Makefile.config which at the
</I>&gt;<i> moment is not configurable via the GODI package: the location of the
</I>&gt;<i> Postgresql Unix domain socket.
</I>Thanks for bringing that to my attention.  I will add an option to
configure it.

Originally, I had the separate package thing set up so that packages
depending on 'pgocaml' would know which one they're getting.  Upon
further thought, it seems this doesn't really matter (the only impact of
the wrong PGOCaml should be an increased executable size), so I'll go
ahead and make them a single package.

- Michael

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000108.html">[Pgocaml-dev] Patch to make PGOCaml work with Batteries
</A></li>
	<LI>Next message: <A HREF="000110.html">[Pgocaml-dev] Specifying additional parameters (such as search_path) at connection time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109">[ date ]</a>
              <a href="thread.html#109">[ thread ]</a>
              <a href="subject.html#109">[ subject ]</a>
              <a href="author.html#109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pgocaml-dev">More information about the Pgocaml-dev
mailing list</a><br>
</body></html>
